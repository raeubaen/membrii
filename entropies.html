<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

	<meta charset="UTF-8"/>
	<title>Crack Results</title>
	<meta http-equiv="Content-Style-Type" content="text/css"/>
	<meta http-equiv="Content-Script-Type" content="application/javascript"/>
	<meta name="viewport" content="width=device-width,initial-scale=1"/>
	<link rel="Stylesheet" href="dist/style/cryptii.css" type="text/css"/>

	<style type="text/css">
	table{
		border-collapse: separate;
  		border-spacing: 50pt 0;
		color: white;
		margin: 20pt;
		font-size: 12pt;
	}
	#guesses div.bar {
		height: 1em;
		background: #80C0FF;
	}
	#guesses tr.active {
		font-weight: bold;
	}
	#guesses tr.active div.bar {
		background: #60A0FF;
	}
	</style>
</head>

<body>
	<table>
		<thead>
			<tr>
				<th>Shift</th>
				<th colspan="2">Entropy per letter (bits) <span style="font-weight:normal">(lower is better)</span></th>
				<th colspan="2">Beginning of deciphered text </th>
			</tr>
		</thead>
		<tbody id="guesses"></tbody>
	</table>

	<script type="text/javascript">
		Storage.prototype.getObj = function(key) {
			return JSON.parse(this.getItem(key))
		}
		entropies = localStorage.getObj("entropies")
		trialsDict = localStorage.getObj("trials")
		var guessesElem = document.getElementById("guesses");
		entropies.forEach(function(item, index) {
			maxEntropy = entropies[entropies.length - 1][1];
			minEntropy = entropies[0][1];
			var tr = guessesElem.appendChild(document.createElement("tr"));
			if (index == 0)
				tr.classList.add("active");
			var td = tr.appendChild(document.createElement("td"));
			td.textContent = item[0].toString();
			
			td = tr.appendChild(document.createElement("td"));
			td.textContent = item[1].toFixed(3);
			
			td = tr.appendChild(document.createElement("td"));
			var div = td.appendChild(document.createElement("div"));
			div.classList.add("bar");
			div.style.width = ((item[1] - minEntropy) / maxEntropy * 30 + 1).toFixed(6) + "em";
			
			td = tr.appendChild(document.createElement("td"));
			td.textContent = trialsDict[item[0]];
		});
	</script>

</body>
</html>
